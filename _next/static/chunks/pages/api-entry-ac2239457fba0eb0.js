(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[386],{3583:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var r=t(9499),i=t(7812),o=t(1163),s=t(7294),c=t(5934),l=t(4365),u=t(6349),a=t(1297),d=t(5893);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(){var e=["GET","DELETE","HEAD","OPTIONS","PATCH","POST","PUT"],n=(0,o.useRouter)(),t=(0,s.useContext)(a.A8),f=t.probeData,p=t.handleSetProbes,m=(0,s.useState)([]),x=m[0],v=m[1],j=null===f||void 0===f?void 0:f.map((function(e){var n,t,r;return{id:e.id,url:null===e||void 0===e||null===(n=e.requests[0])||void 0===n?void 0:n.url,method:null===(t=e.requests[0])||void 0===t?void 0:t.method,body:JSON.stringify(null===e||void 0===e||null===(r=e.requests[0])||void 0===r?void 0:r.body,null,2)}})),y=(0,s.useState)(j||[{id:(0,c.Z)(),url:"",method:"GET",body:JSON.stringify(null,null,2)}]),b=y[0],O=y[1],N=function(e,n,t){if("body"===n)try{JSON.parse(t),v((function(n){return n.filter((function(n){return n.id!==e}))}))}catch(s){var o={id:e,message:s.message};v((function(n){return[].concat((0,i.Z)(n.filter((function(n){return n.id!==e}))),[o])}))}O((function(i){return i.map((function(i){return i.id===e?h(h({},i),{},(0,r.Z)({},n,t)):i}))}))};return(0,d.jsxs)(l.Ar,{children:[(0,d.jsx)(l.$y,{subtitle:"Add API"}),(0,d.jsx)("div",{className:"lg:py-20 xl:py-32 xl:px-80",children:(0,d.jsxs)("form",{className:"text-sm sm:text-lg",onSubmit:function(e){e.preventDefault();var t=b.map((function(e){var n=e.id,t=e.url,r=e.method,i=e.body;return{id:n,name:new URL(t).hostname.replaceAll(".","_"),interval:10,requests:[{url:t,body:JSON.parse(i),timeout:1e4,method:r}],incidentThreshold:5,recoveryThreshold:5,alerts:[]}}));p(t),n.push("/notifications")},children:[(0,d.jsxs)("fieldset",{children:[(0,d.jsxs)("div",{className:"space-y-8 mb-10",children:[(0,d.jsx)("p",{children:"What is the endpoint of the API?"}),b.map((function(n){var t=n.id,r=n.url,i=n.method,o=n.body,s=x.find((function(e){return e.id===t}));return(0,d.jsxs)("div",{className:"space-y-8",children:[(0,d.jsxs)("div",{className:"flex flex-row space-x-8",children:[(0,d.jsx)("div",{className:"w-8/12",children:(0,d.jsx)(l.oi,{id:"data".concat(t,"-url"),type:"url",placeholder:"https://example.com",onChange:function(e){return N(t,"url",e.target.value)},value:r})}),(0,d.jsx)("div",{className:"w-4/12",children:(0,d.jsx)(l.Ph,{id:"data".concat(t,"-method"),onChange:function(e){return N(t,"method",e.target.value)},value:i,children:e.map((function(e){return(0,d.jsx)(l.$m,{value:e,children:e},e)}))})})]}),(0,d.jsxs)("div",{className:"flex flex-row items-center space-x-8",children:[(0,d.jsx)("p",{children:"Body"}),(0,d.jsx)("div",{className:"w-full sm:w-3/12",children:(0,d.jsx)(l.Ph,{id:"data".concat(t,"-content-type"),children:(0,d.jsx)(l.$m,{value:"JSON",children:"JSON"})})})]}),(0,d.jsx)(u.Z,{placeholder:"{ }",id:"data".concat(t,"-body"),onChange:function(e){return N(t,"body",e.target.value)},value:o}),s&&(0,d.jsx)("span",{className:"text-red-500",children:null===s||void 0===s?void 0:s.message}),b.length>1&&(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)(l.zx,{onClick:function(){return function(e){O((function(n){return n.filter((function(n){return n.id!==e}))}))}(t)},children:"Remove"})}),b.length>1&&(0,d.jsx)("hr",{})]},t)}))]}),(0,d.jsx)("div",{className:"space-y-8",children:(0,d.jsx)("button",{className:"cursor-pointer underline focus:outline-none",type:"button",onClick:function(){O((function(e){return[].concat((0,i.Z)(e),[{id:(0,c.Z)(),url:"",method:"GET",body:JSON.stringify(null,null,2)}])}))},children:"Add another endpoint"})})]}),(0,d.jsxs)("div",{className:"mt-12 py-3 space-x-7",children:[(0,d.jsx)(l.zx,{type:"button",outline:!0,onClick:function(){return n.back()},children:"Back"}),(0,d.jsx)(l.zx,{type:"submit",children:"Next"})]})]})})]})}},5392:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/api-entry",function(){return t(3583)}])}},function(e){e.O(0,[523,988,365,774,888,179],(function(){return n=5392,e(e.s=n);var n}));var n=e.O();_N_E=n}]);