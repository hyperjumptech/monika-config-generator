(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[769],{4048:function(e,n,r){"use strict";r.d(n,{c:function(){return o}});var i=r(6156),t=r(7294);function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,i)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){(0,i.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function o(e){var n=e.initialValues,r=(0,t.useState)(n),a=r[0],o=r[1];return{values:a,setFieldValue:function(e,n){o((function(r){return l(l({},r),{},(0,i.Z)({},e,n))}))}}}},8485:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return p}});var i=r(5893),t=r(7329),a=r(7294),l=r(1163),o=r(4586),s=r(7625),u=r(1436),d=r(3107),c=r(4048),m=r(7874);function p(){var e,n=(0,l.useRouter)(),r=(0,o.Z)(),t=(0,o.Z)(),s=(0,c.c)({initialValues:{notificationChannel:"email",recipients:[{id:t,email:""}]}}),u=(0,a.useContext)(m.u).handleSetNotifications,p=s.values,j=s.setFieldValue,y=p.notificationChannel,b=[{type:"email",label:"Email",formComponent:(0,i.jsx)(v,{formHelper:s}),data:w(r,p)},{type:"discord",label:"Discord",formComponent:(0,i.jsx)(f,{formHelper:s}),data:{id:r,type:y,data:{url:null===p||void 0===p?void 0:p.url}}},{type:"workplace",label:"Facebook Workplace",formComponent:(0,i.jsx)(h,{formHelper:s}),data:{id:r,type:y,data:{thread_id:null===p||void 0===p?void 0:p.thread_id,access_token:null===p||void 0===p?void 0:p.access_token}}},{type:"teams",label:"Microsoft Teams",formComponent:(0,i.jsx)(f,{formHelper:s}),data:{id:r,type:y,data:{url:null===p||void 0===p?void 0:p.url}}},{type:"monika-notif",label:"Monika WhatsApp Notifier",formComponent:(0,i.jsx)(f,{formHelper:s}),data:{id:r,type:y,data:{url:null===p||void 0===p?void 0:p.url}}},{type:"slack",label:"Slack",formComponent:(0,i.jsx)(f,{formHelper:s}),data:{id:r,type:y,data:{url:null===p||void 0===p?void 0:p.url}}},{type:"telegram",label:"Telegram",formComponent:(0,i.jsx)(x,{formHelper:s}),data:{id:r,type:y,data:{group_id:null===p||void 0===p?void 0:p.group_id,bot_token:null===p||void 0===p?void 0:p.bot_token}}},{type:"webhook",label:"Webhook",formComponent:(0,i.jsx)(f,{formHelper:s}),data:{id:r,type:y,data:{url:null===p||void 0===p?void 0:p.url}}},{type:"whatsapp",label:"WhatsApp",formComponent:(0,i.jsx)(g,{formHelper:s}),data:{id:r,type:y,data:{recipients:null===p||void 0===p?void 0:p.recipients,url:null===p||void 0===p?void 0:p.url,username:null===p||void 0===p?void 0:p.username,password:null===p||void 0===p?void 0:p.password}}}];return(0,i.jsxs)(d.Ar,{children:[(0,i.jsx)(d.$y,{subtitle:"Add notifications"}),(0,i.jsxs)("div",{className:"lg:py-20 xl:py-32 xl:px-80",children:[(0,i.jsx)(d.l0.Item,{label:"How do you want to be notified when your website is down?",name:"notification-channel",children:(0,i.jsx)(d.Ph,{id:"notification-channel",value:y,onChange:function(e){return j("notificationChannel",e.target.value)},children:b.map((function(e){return(0,i.jsx)(d.$m,{value:e.type,children:e.label},e.type)}))})}),null===(e=b.find((function(e){return e.type===y})))||void 0===e?void 0:e.formComponent,(0,i.jsxs)("div",{className:"mt-12 py-3",children:[(0,i.jsx)(d.zx,{onClick:function(){n.back()},outline:!0,className:"mr-7",children:"Back"}),(0,i.jsx)(d.zx,{onClick:function(){var e,r=null===(e=b.find((function(e){return e.type===y})))||void 0===e?void 0:e.data;u(r?[r]:[]),n.push("/download")},children:"Next"})]})]})]})}function v(e){var n=e.formHelper,r=n.values,a=n.setFieldValue,l=r.emailService,c=r.recipients,m=(null===c||void 0===c?void 0:c.length)>1;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.l0.Item,{label:"What is the e-mail address to receive the notification?",name:"recipients",children:[null===c||void 0===c?void 0:c.map((function(e){return(0,i.jsxs)("div",{className:"flex mb-2",children:[(0,i.jsx)(d.oi,{placeholder:"monika@example.com",value:e.email,type:"email",onChange:function(n){return r=e.id,i=n.target.value,void a("recipients",c.map((function(e){return e.id===r?{id:e.id,email:i}:e})));var r,i},className:m?"w-11/12":"w-full"}),m&&(0,i.jsx)(d.zx,{className:"items-center px-5",variant:"text",children:(0,i.jsx)(s.G,{size:"lg",icon:u.uMC,onClick:function(){return n=e.id,void a("recipients",c.filter((function(e){return e.id!==n})));var n}})})]},e.id)})),(0,i.jsx)(d.zx,{variant:"text",onClick:function(){a("recipients",c?[].concat((0,t.Z)(c),[{id:(0,o.Z)(),email:""}]):[{id:(0,o.Z)(),email:""}])},children:"Add another e-mail address"})]}),(0,i.jsxs)(d.l0.Item,{label:"How to send the e-mail?",name:"type",children:[(0,i.jsx)(d.Ph,{id:"type",value:l,onChange:function(e){return a("emailService",e.target.value)},children:[{type:"",label:"Select a method..."},{type:"smtp",label:"SMTP"},{type:"mailgun",label:"Mailgun"},{type:"sendgrid",label:"Sendgrid"}].map((function(e){return(0,i.jsx)(d.$m,{value:e.type,children:e.label},e.type)}))}),"smtp"===l&&(0,i.jsx)(j,{formHelper:n}),"mailgun"===l&&(0,i.jsx)(y,{formHelper:n}),"sendgrid"===l&&(0,i.jsx)(b,{formHelper:n})]})]})}function h(e){var n=e.formHelper,r=n.values,t=n.setFieldValue,a=r.thread_id,l=r.access_token;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l0.Item,{label:"Thread ID",name:"thread_id",children:(0,i.jsx)(d.oi,{id:"thread_id",value:a,onChange:function(e){return t("thread_id",e.target.value)},placeholder:"12345678910"})}),(0,i.jsx)(d.l0.Item,{label:"Access Token",name:"access_token",children:(0,i.jsx)(d.oi,{id:"access_token",value:l,onChange:function(e){return t("access_token",e.target.value)},placeholder:"your_custom_integration_access_token"})})]})}function f(e){var n=e.formHelper,r=n.values,t=n.setFieldValue,a=r.url;return(0,i.jsx)(d.l0.Item,{label:"Webhook URL",name:"url",children:(0,i.jsx)(d.oi,{id:"url",value:a,type:"url",onChange:function(e){return t("url",e.target.value)}})})}function x(e){var n=e.formHelper,r=n.values,t=n.setFieldValue,a=r.group_id,l=r.bot_token;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l0.Item,{label:"Group ID",name:"group_id",children:(0,i.jsx)(d.oi,{id:"group_id",value:a,onChange:function(e){return t("group_id",e.target.value)},placeholder:"-123456"})}),(0,i.jsx)(d.l0.Item,{label:"Bot Token",name:"bot_token",children:(0,i.jsx)(d.oi,{id:"bot_token",value:l,onChange:function(e){return t("bot_token",e.target.value)},placeholder:"abcdefg:hijklmnopqrstuvwxyz"})})]})}function g(e){var n=e.formHelper,r=n.values,a=n.setFieldValue,l=r.recipients,c=r.url,m=r.username,p=r.password,v=(null===l||void 0===l?void 0:l.length)>1;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.l0.Item,{label:"Recipient Number",name:"recipients",children:[null===l||void 0===l?void 0:l.map((function(e){return(0,i.jsxs)("div",{className:"flex mb-2",children:[(0,i.jsx)(d.oi,{value:e.number,type:"tel",onChange:function(n){return r=e.id,i=n.target.value,void a("recipients",l.map((function(e){return e.id===r?{id:e.id,number:i}:e})));var r,i},className:v?"w-11/12":"w-full"}),v&&(0,i.jsx)(d.zx,{className:"items-center px-5",variant:"text",children:(0,i.jsx)(s.G,{size:"lg",icon:u.uMC,onClick:function(){return n=e.id,void a("recipients",l.filter((function(e){return e.id!==n})));var n}})})]},e.id)})),(0,i.jsx)(d.zx,{variant:"text",onClick:function(){a("recipients",l?[].concat((0,t.Z)(l),[{id:(0,o.Z)(),number:""}]):[{id:(0,o.Z)(),number:""}])},children:"Add another Recipient Number"})]}),(0,i.jsx)(d.l0.Item,{label:"URL",name:"url",children:(0,i.jsx)(d.oi,{id:"url",value:c,type:"url",onChange:function(e){return a("url",e.target.value)}})}),(0,i.jsx)(d.l0.Item,{label:"Username",name:"username",children:(0,i.jsx)(d.oi,{id:"username",value:m,onChange:function(e){return a("username",e.target.value)}})}),(0,i.jsx)(d.l0.Item,{label:"Password",name:"password",children:(0,i.jsx)(d.oi,{id:"password",value:p,type:"password",onChange:function(e){return a("password",e.target.value)}})})]})}function j(e){var n=e.formHelper,r=n.values,t=n.setFieldValue,a=r.hostname,l=r.port,o=r.username,s=r.password;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l0.Item,{children:(0,i.jsxs)("p",{className:"text-lg",children:["Provide your SMTP server configuration.",(0,i.jsx)("br",{}),"Check out our docs to see an"," ",(0,i.jsx)("a",{className:"underline",href:"https://hyperjumptech.github.io/monika/guides/notifications#example-using-gmail-smtp",target:"_blank",rel:"noreferrer noopenner",children:"example of using Gmail SMTP server"}),"."]})}),(0,i.jsx)(d.l0.Item,{label:"SMTP Hostname",name:"hostname",children:(0,i.jsx)(d.oi,{id:"hostname",value:a,onChange:function(e){return t("hostname",e.target.value)},placeholder:"smtp.example.com"})}),(0,i.jsx)(d.l0.Item,{label:"SMTP Port",name:"port",children:(0,i.jsx)(d.oi,{id:"port",value:l,type:"number",onChange:function(e){return t("port",e.target.value)},placeholder:"587"})}),(0,i.jsx)(d.l0.Item,{label:"SMTP Username",name:"username",children:(0,i.jsx)(d.oi,{id:"username",value:o,onChange:function(e){return t("username",e.target.value)},placeholder:"email@example.com"})}),(0,i.jsx)(d.l0.Item,{label:"SMTP Password",name:"password",children:(0,i.jsx)(d.oi,{id:"password",value:s,onChange:function(e){return t("password",e.target.value)},type:"password",placeholder:"super-secret-password"})})]})}function y(e){var n=e.formHelper,r=n.values,t=n.setFieldValue,a=r.apiKey,l=r.domain;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l0.Item,{children:(0,i.jsxs)("p",{className:"text-lg",children:["Provide your Mailgun configuration.",(0,i.jsx)("br",{}),"You can get the API key and the domain from"," ",(0,i.jsx)("a",{href:"https://www.mailgun.com/",target:"_blank",rel:"noreferrer noopener",className:"underline",children:"Mailgun website"}),"."]})}),(0,i.jsx)(d.l0.Item,{label:"API Key",name:"apiKey",children:(0,i.jsx)(d.oi,{id:"apiKey",value:a,onChange:function(e){return t("apiKey",e.target.value)},type:"text",placeholder:"key-xxxx"})}),(0,i.jsx)(d.l0.Item,{label:"Domain",name:"domain",children:(0,i.jsx)(d.oi,{id:"domain",value:l,onChange:function(e){return t("domain",e.target.value)},type:"text",placeholder:"mailgun.com"})})]})}function b(e){var n=e.formHelper,r=n.values,t=n.setFieldValue,a=r.apiKey;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.l0.Item,{children:(0,i.jsxs)("p",{className:"text-lg",children:["Provide your Sendgrid configuration.",(0,i.jsx)("br",{}),"You can get the API key from"," ",(0,i.jsx)("a",{href:"https://sendgrid.com/",target:"_blank",rel:"noreferrer noopener",className:"underline",children:"Sendgrid website"}),"."]})}),(0,i.jsx)(d.l0.Item,{label:"API Key",name:"apiKey",children:(0,i.jsx)(d.oi,{id:"apiKey",value:a,onChange:function(e){return t("apiKey",e.target.value)},type:"apiKey",placeholder:"key-xxxx"})})]})}function w(e,n){var r;switch(null===n||void 0===n?void 0:n.emailService){case"smtp":return{id:e,type:null===n||void 0===n?void 0:n.emailService,data:{recipients:null===n||void 0===n?void 0:n.recipients.map((function(e){return e.email})),hostname:null===n||void 0===n?void 0:n.hostname,port:parseInt(null!==(r=null===n||void 0===n?void 0:n.port)&&void 0!==r?r:0),username:null===n||void 0===n?void 0:n.username,password:null===n||void 0===n?void 0:n.password}};case"mailgun":return{id:e,type:null===n||void 0===n?void 0:n.emailService,data:{recipients:null===n||void 0===n?void 0:n.recipients.map((function(e){return e.email})),apiKey:null===n||void 0===n?void 0:n.apiKey,domain:null===n||void 0===n?void 0:n.domain}};case"sendgrid":return{id:e,type:null===n||void 0===n?void 0:n.emailService,data:{recipients:null===n||void 0===n?void 0:n.recipients.map((function(e){return e.email})),apiKey:null===n||void 0===n?void 0:n.apiKey}}}}},4690:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/notifications",function(){return r(8485)}])}},function(e){e.O(0,[774,523,112,394,107,888,179],(function(){return n=4690,e(e.s=n);var n}));var n=e.O();_N_E=n}]);